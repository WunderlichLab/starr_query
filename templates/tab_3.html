{% if enhancers %}
    <div style="margin-top: 2em;">
        <!-- Results Summary -->
        <div>
            <strong>Total Enhancers Found: {{ enhancers|length }}</strong>
        </div>

        <!-- Enhancer Table -->
        <table id="activityClassTable" class="display" style="width:100%;">
            <thead>
                <tr>
                    <th rowspan="2">Enhancer</th>
                    <th rowspan="2">Activity Class</th>
                    <th rowspan="2">Accessibility</th>
                    <th rowspan="2">Gene Symbol</th>
                    <th rowspan="2">Distance to Enhancer</th>
                    <th rowspan="2">Time Cluster</th>
                    <th rowspan="2">Broad Immune Role</th>
                </tr>
            </thead>
            {% for e in enhancers %}
            <tbody>
            <tr>
                <td>{{ e.enhancer_name }}</td>
                <td>{{ e.activity_class }}</td>
                <td>{{ e.accessibility }}</td>
                <td>{{ e.gene_symbol or e.gene_id or 'N/A'}}</td>
                <td>{{ e.dist_to_enh }}</td>
                <td>{{ e.time_cluster }}</td>
                <td>{{ e.broad_immune_role }}</td>
            </tr>
            </tbody>
            {% endfor %}
        </table>
    </div>

{% else %}
    <p style="margin-top: 1em; color: #666;">
        {% if error_message %}
            {{ error_message }}
        {% else %}
            No enhancers found matching your criteria. Please adjust your filters and try again.
        {% endif %}
    </p>
{% endif %}
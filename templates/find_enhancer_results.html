{% if enhancers %}
<table id="enhancerTable" class="display" style="width:100%; margin-top:1em;">
  <thead>
    <tr>
      <th>Enhancer ID</th>
      <th>Enhancer Name</th>
      <th>Activity Score</th>
      <th>Condition</th>
      <th>Chromosome</th>
      <th>Start</th>
      <th>End</th>
      <th>UCSC View</th>
    </tr>
  </thead>
  <tbody>
    {% for e in enhancers %}
    <tr>
      <td>{{ e.EnhancerID }}</td>
      <td>{{ e.EnhancerName }}</td>
      <td>{{ e.ActivityScore }}</td>
      <td>{{ e.ExpCondition }}</td>
      <td>{{ e.Chromosome }}</td>
      <td>{{ e.Start }}</td>
      <td>{{ e.End }}</td>
      <td>
        {% if e.Chromosome and e.Start and e.End %}
        <a href="https://genome.ucsc.edu/cgi-bin/hgTracks?db=dm6&position={{ e.Chromosome }}:{{ e.Start }}-{{ e.End }}"
           target="_blank">View</a>
        {% else %}
        N/A
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if chart_data and chart_data|length > 1 %}
<div id="activity_chart"
     data-chart='{{ chart_data|tojson }}'
     style="width:900px; height:500px; margin-top:2em;">
</div>
{% endif %}

{% else %}
<p>No enhancers found matching your criteria.</p>
{% endif %}
